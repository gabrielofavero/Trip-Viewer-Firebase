<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Reservation code toggle</title>
<style>
    .reservation-box {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      background: #f3f4f6;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-family: monospace;
    }
  
    /* Code container animates width */
    .code-wrapper {
      position: relative;
      overflow: hidden;
      display: inline-block;
      transition: width 0.25s ease;
      white-space: nowrap;
      padding-right: 0.5ch;
    }

    .code-text {
      display: inline-block;
      font-size: 16px;
      line-height: 1.2;
      font-weight: 600;
    }
  
    /* masked look */
    .masked {
      letter-spacing: 0.15em;
      color: #6b7280;

    }
  
    .toggle-eye {
      background: none;
      border: none;
      cursor: pointer;
      padding: 4px;
    }
  
    .eye-icon { width: 18px; height: 18px; }
  </style>
  
  <div class="reservation-box" data-visible="false" data-reservation="ABCD-1234-XYZ">
    <span class="code-wrapper">
      <span class="code-text masked">***</span>
    </span>
  
    <button class="toggle-eye" aria-pressed="false">
      <!-- INSERT YOUR "eye closed" SVG INSIDE HERE -->
      <svg class="eye-icon eye-closed" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M3 3l18 18"></path><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"></path>
      </svg>
      <!-- INSERT YOUR "eye open" SVG HERE (hidden by default) -->
      <svg class="eye-icon eye-open" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="display:none">
        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"></path><circle cx="12" cy="12" r="3"></circle>
      </svg>
    </button>
  </div>
  
  <script>
    const box = document.querySelector('.reservation-box');
    const wrapper = box.querySelector('.code-wrapper');
    const textSpan = box.querySelector('.code-text');
    const btn = box.querySelector('.toggle-eye');
  
    const actual = box.dataset.reservation;
    const masked = '***';
  
    // Create offscreen measurement span
    const measure = document.createElement('span');
    measure.style.position = 'absolute';
    measure.style.visibility = 'hidden';
    measure.style.whiteSpace = 'nowrap';
    measure.style.font = window.getComputedStyle(textSpan).font;
    document.body.appendChild(measure);
  
    function getWidth(value) {
      measure.textContent = value;
      return measure.getBoundingClientRect().width;
    }
  
    function updateUI(visible) {
      box.dataset.visible = visible;
  
      // text swap
      textSpan.textContent = visible ? actual : masked;
      textSpan.classList.toggle('masked', !visible);
  
      // Width animation
      wrapper.style.width = getWidth(visible ? actual : masked) + 'px';
  
      // Swap icons
      box.querySelector('.eye-closed').style.display = visible ? 'none' : '';
      box.querySelector('.eye-open').style.display = visible ? '' : 'none';
  
      btn.setAttribute('aria-pressed', visible);
    }
  
    // Initial fixed width (so heights match)
    wrapper.style.width = getWidth(masked)+'px';
    updateUI(false);
  
    btn.onclick = () => updateUI(box.dataset.visible !== 'true');
  </script>
  
</body>
</html>
